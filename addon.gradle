sourceSets.main {
    java.srcDir("AVRcore/src")
}

task initAVRcore(type: Exec) {
    description = "Updates (and inits) git submodules"
    group = "Build Setup"
    commandLine(projectDir.toString() + "/git", "submodule", "update", "--init", "--recursive", "--remote")
}

tasks.setupCIWorkspace.dependsOn initAVRcore
tasks.setupDevWorkspace.dependsOn initAVRcore
tasks.setupDecompWorkspace.dependsOn initAVRcore
tasks.compileJava.dependsOn initAVRcore
